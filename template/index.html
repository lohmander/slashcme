<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link href='https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/github.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <!--[if lt IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <header class="page-header">
        <span class="page-header__heading">Blog</span>
        <ul>
        <li>
            <a href="#">github.com/lohmander</a>
            </li>
            <li>
            <a href="#">twitter.com/hanneslohmander</a>
            </li>
        </ul>
        </header>
        <!--<main>
        <a href="#">
            <article><time>2015-03-23</time><h2>Bulding docker images with Drone and Docker</h2></article>
        </a>
        </main>-->
        <article>
            <h1>A new api framework written in Go</h1>
            <p>It's not really a new thing, but it is for me... or something along those lines.</p>
            <h2>We need to go deeper...</h2>
            <p>So this isn't an entirely new subject, there's even an official Docker-image for this purpose: dind. However I found that it wasn't as straight forward to get set up as one would've hoped.</p>
            <pre>
<code class="go">
func (item *Item) Get(r *webapi.Request) (int, webapi.Response) {
    // ...
}
</code>
</pre>
            <img src="http://lohmander.me/content/images/2015/10/d2f.jpg">
            <p>
First of all, Drone needs git and some other dependencies to be installed in the build container, which it is not by default in the official docker-dind image. I made a new image based on the official one that includes those dependencies though, which can be found here (pull down with docker pull lohmander/drone-dind).
So to be able to connect to the Docker daemon from within the container itself (in order to build our image), we need to run the entrypoint-script, wait for it to start and then run our Docker commands.</p>
            <h3>Some important notes</h3>
            <ul>
                <li>One</li>
                <li>Two</li>
                <li>Three and a bunch of other not very important texts that shohuld just produce a line break. And continuing on this line to see if we can get one more.</li>
            </ul>

            <h2>What's new?</h2>
<pre>
<code class="go">
func (item *Item) Get(r *webapi.Request) (int, webapi.Response) {
    // ...
}
</code>
</pre>
            <p>So I've recently started to do pretty much everything inside of docker containers. It's super convenient to develop in the same containers that will run on production, it's really quick and easy to setup common services and what not. This blog runs on Ghost in a container on top of CoreOS for instance.
One thing that didn't seem to be as clear was how to integrate the goodness of Docker with my CI-setup. After taking a look at different alternatives I really liked what Drone was doing, it already uses docker to setup isolated build environments.</p>
        </article>

        <div id="disqus_thread"></div>
        <script>
        /**
        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//lohmander.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        <script src="js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
